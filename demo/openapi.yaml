openapi: 3.0.2
info:
  version: v1
  title: Te Rito APIs
  description: "<p>Derived from SIF Data Model (New Zealand) v3.1 (rc1)</p>
    <p><strong>Release Date: </strong>01-Apr-2020</p>"
  contact:
    name: Ministry of Education
    url: http://www.terito.govt.nz
    email: terito@education.govt.nz
servers:
  - url: https://{host}.edsby.co.nz/{basePath}
    description: The demonstration Te Rito server
    variables:
      host:
        default: southern
        description: southern.edsby.co.nz is the default demonstration platform
      basePath:
        default: sif
security:
  - sifDataObject:
      - sysadmin
      - TERITO_SMS
  - devt: []
paths:
  "/Providers/{ProviderRefId}":
    get:
      summary: Default operation to get a single Provider
      operationId: getProvider
      parameters:
        - name: ProviderRefId
          in: path
          description: <p>The SIF GUID used by systems to identify the organisation.</p>
          required: true
          schema:
            type: string
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  Provider:
                    $ref: ./jsonSchema.NZ.create.yaml#/properties/Provider
              example:
                Provider:
                  AddressList:
                    Address:
                      - Type: RU
                        Role: PHY
                        Street:
                          Line1: 1175 Lake Ferry Rd
                        Suburb: RD 1
                        City: Martinborough
                  CommunicationChannelList:
                    Channel:
                      - Notes: Attendance System (Self Service)
                        Type: WEB
                        Value: http://att.hogwarts.school.nz
                      - Notes: School Website
                        Type: WEB
                        Value: http://www.hogwarts.school.nz
                  ContactList:
                    Contact:
                      - Name:
                          FamilyName: Dumbledore
                          GivenName: Albus
                          FullName: Albus Dumbledore
                        PositionTitle: Headmaster
                        Role: PRI
                        AddressList:
                          Address:
                            - Type: TH
                              Role: PHY
                              Street:
                                Line1: 533 Hogwart's Way
                              City: Hogsmead
                              PostalCode: "7733"
                      - Name:
                          FamilyName: Hagrid
                          GivenName: Rubeus
                          FullName: Rubeus Hagrid
                        PositionTitle: Gamekeeper
                        Role: DIR
                        AddressList:
                          Address:
                            - Type: TH
                              Role: PHY
                              Street:
                                Line1: The Enchanted Wood
                                Line2: 533 Hogwart's Way
                              City: Hogsmead
                              PostalCode: "7733"
                  EducationRegion: TAIT
                  EmailList:
                    Email:
                      - Type: PRIM
                        Address: stuart@gmail.com
                  EntityOpen: 1652-04-01
                  LocationList:
                    Location:
                      - Description: Only Campus
                        Address:
                          Type: RU
                          Role: PHY
                          Street:
                            Line1: 1175 Lake Ferry Rd
                          Suburb: RD 1
                          City: Martinborough
                          PostalCode: "5781"
                        GridLocation:
                          Latitude: -41.2814719
                          Longitude: 175.3458472
                        StatisticalAreaList:
                          StatisticalArea:
                            - SpatialUnitType: GE
                              Code: "058"
                            - SpatialUnitType: TA
                              Code: "050"
                            - SpatialUnitType: WA
                              Code: "05003"
                  Name: Hogwart's Area School
                  PhoneNumberList:
                    PhoneNumber:
                      - Notes: Attendance Office (Automated)
                        Usage: SMS
                        Type: WTE
                        Number: (0274) 300 9991
                      - Notes: Attendance Office
                        Usage: INT
                        Type: WTE
                        Number: (04) 300 9992
                      - Notes: School Secretary DDI
                        Type: WTE
                        Number: (04) 300 9993
                  RelatedOrganisationList:
                    RelatedOrganisation:
                      - RefId: 0951bacf-fc88-4ed6-8113-11a6d6335c07
                        LocalId: "99102"
                        Name: Tai Tokerau
                        ObjectType: Organisation
                        StartDate: 2012-10-31
                        Type: MOE
                      - RefId: ac0871d9-6562-4209-ae86-abdb3661842b
                        LocalId: "99204"
                        Name: Masterton (Whakaoriori) KƒÅhui Ako
                        ObjectType: Organisation
                        StartDate: 2012-04-30
                        Type: COL
                  OperationalStatus: O
                  Type: "21"
                  ProviderRefId: D3E34B35-9D75-101A-8C3D-00AA001A1652
                  ProviderLocalId: "01011234"
                  MinistryOfEducationId: "9651"
                  Authority: STATE
                  SchoolService:
                    CoEdStatus: COED
                    Decile: 5
                    NewEntrantPolicyList:
                      EnactedPolicy:
                        - EffectiveTo: 2018-12-31
                          Policy: AE
                        - EffectiveFrom: 2019-01-01
                          Policy: CE
                    DefinitionList:
                      Definition:
                        - SMBS
                        - KKMA
                        - SWBF
                    SchoolYearList:
                      SchoolYear:
                        - YearLevel: 1
                          Gender: C
                        - YearLevel: 2
                          Gender: C
                        - YearLevel: 3
                          Gender: C
                        - YearLevel: 4
                          Gender: C
                        - YearLevel: 5
                          Gender: C
                        - YearLevel: 6
                          Gender: C
                        - YearLevel: 7
                          Gender: C
                        - YearLevel: 8
                          Gender: C
                        - YearLevel: 9
                          Gender: F
                        - YearLevel: 10
                          Gender: F
                        - YearLevel: 11
                          Gender: F
                        - YearLevel: 12
                          Gender: F
                        - YearLevel: 13
                          Gender: F
        default:
          description: Failed to retrieve object(s).
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    $ref: jsonSchema.IN.update.yaml#/properties/error
            application/xml:
              schema:
                type: object
                properties:
                  error:
                    $ref: jsonSchema.IN.update.yaml#/properties/error
  "/Enrolment/{EnrolmentRefId}":
    get:
      summary: Default operation to get a ProviderStudentEnrolment
      operationId: getEnrolment
      parameters:
        - name: EnrolmentRefId
          in: path
          description: <p>The SIF GUID used by systems to identify the enrolment.</p>
          required: true
          schema:
            type: string
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  Enrolment:
                    $ref: ./jsonSchema.NZ.create.yaml#/properties/StudentProviderEnrolment
              example:
                StudentProviderEnrolment:
                  StudentProviderEnrolmentRefId: A8C3D3E3-4B35-9D75-101D-00AA001A1652
                  StudentProviderEnrolmentLocalId: 2004H102
                  Student:
                    RefId: d3e34b35-9d75-101a-8c3d-00aa001a1652
                  StudentId: 851039McG
                  Provider:
                    RefId: d3e34b35-9d75-101a-8c3d-00aa001a1651
                  EntryDate: 2018-01-29
                  Status: ACT
                  SchoolEnrolmentList:
                    SchoolEnrolment:
                      - SchoolCalendarYear: 2018
                        MembershipType: BASE
                        YearLevel: 11
                        FTE: 1
                        FundingType: EX
                        FundingYearLevel: 1
                        Curriculum: NZC
        default:
          $ref: "#/paths/~1Providers~1%7BProviderRefId%7D/get/responses/default"
components:
  securitySchemes:
    devt:
      type: http
      scheme: basic
      description: >-
        HTTP Basic authentication is only available on 'sandbox' edsby
        environments

        to facilitate development testing
    sifDataObject:
      type: http
      scheme: bearer
      bearerFormat: SIF Session Token
      description: >-
        HTTP Bearer authentication is applied to all SIF data objects; with the
        bearer token being the SIF Session Token

        that was returned by a call to the [SIF environment](#operation/createEnvironment) service.
